
<!DOCTYPE html>
<html>
  <head>

    <title>Macros - Def Macros - Scala Documentation</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="icon" type="image/png" href="/resources/favicon.ico">

    <!-- prettify js and CSS -->
    <link rel="stylesheet" href="/resources/stylesheets/prettify.css" type="text/css" />
    <script src="/resources/javascript/prettify/prettify.js" type="text/javascript" ></script>


    <!-- jquery js -->
    <script src="/resources/javascript/jquery.js" type="text/javascript" ></script>
    <script src="/resources/javascript/effects.core.js" type="text/javascript" ></script>
    <script src="/resources/javascript/effects.highlight.js" type="text/javascript" ></script>
    <script src="/resources/javascript/moveScroller.js" type="text/javascript" ></script>

    <!-- Bootstrap JS and CSS -->
    <link rel="stylesheet" href="/resources/stylesheets/bootstrap.css" type="text/css" />
	  <script src="/resources/javascript/bootstrap-dropdown.js" type="text/javascript" ></script>
	  <script src="/resources/javascript/bootstrap-dropdown-app.js" type="text/javascript" ></script>

    <!-- Base stylesheet for all pages -->
    <link rel="stylesheet" href="/resources/stylesheets/base.css" type="text/css" />

    <!-- table of contents js -->
    <script src="/resources/javascript/toc.js" type="text/javascript" ></script>

    <!-- google analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-574683-5']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>

    <!-- prettyprint js to prepend generated pre/code tags -->
    <script type="text/javascript">
      function styleCode()
        {
          if (typeof disableStyleCode != "undefined")
          {
              return;
          }
          var a = false;
          $("pre code").parent().each(function()
          {
              if (!$(this).hasClass("prettyprint"))
              {
                  $(this).addClass("prettyprint lang-scala linenums");
                  a = true
              }
          });
          if (a) { prettyPrint() }
      }
    </script>

    <script type="text/javascript">
      jQuery(document).ready(function($) {

            $(".scroll").click(function(event){
              event.preventDefault();
              $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
              $('html,body').animate({scrollTop:$(this.hash).offset().top-=50}, 500);
              $(this.hash).effect("highlight", {color: "#FFCC85"}, 3000);
            });
      });
    </script>

    <script type="text/javascript">
      $(window).ready(function goToSubsection() {
          if (window.location.hash)
          {
              $('html,body').animate({scrollTop:$(window.location.hash).offset().top}, 500);
              $('html,body').animate({scrollTop:$(window.location.hash).offset().top-=50}, 500);
              $(window.location.hash).effect("highlight", {color: "#FFCC85"}, 3000);
          }
        });
    </script>

    <style type="text/css">

       p.contents {
           margin-left: 15px;
           font-weight: bold;
           font-size: 16px;
       }

       div#toc ul {
           list-style: none;
       }

       div#toc ul a {
           display: block;
           list-style: none;
           line-height: 22px;
           font-weight: bold;
           width: 100%;
       }

      div#toc ul li ul {
           list-style: disc;
      }

      div#toc ul li ul a {
           line-height: 18px;
           font-weight: normal;
      }

      div#toc ul li ul li ul {
           list-style: square;
      }
       div#toc ul li ul li ul a {
       }

       div#scroller-anchor {
           width: inherit;
       }

       div#scroller {
           width: inherit;
       }

       div#guide-title {
        text-transform: capitalize;
        font-size: 16px;
        padding-bottom: 6px;
        color: #BFBFBF;
        text-transform: uppercase;
        font-weight: bold;
       }

       input, textarea, select, .uneditable-input {
	       width: 165px;
	     }

    </style>

</head>
  <body onload="styleCode()">

    <!-- Topbar
    ================================================== -->
<div class="topbar">
    <div class="topbar-inner">
        <div class="container">
            <a class="brand" href="/index.html"><img src="/resources/images/scala-logo.png"> Documentation</a>
            <ul class="nav">

                <li class="menu">
                      <a href="#" class="menu">API</a>
                      <ul class="menu-dropdown">
                        <li><a href="http://www.scala-lang.org/api/current/">Current</a></li>
                        <li><a href="http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html">Nightly</a></li>
                        <!--<li class="divider"></li>
                        <li><a href="#">Previous Versions</a></li>
                        -->
                      </ul>
                </li>

                <li class="menu">
                      <a href="#" class="menu">Learn</a>
                      <ul class="menu-dropdown">
                        <li><a href="/overviews">Guides & Overviews</a></li>
                        <li><a href="/tutorials">Tutorials</a></li>
                        <li><a href="/style">Scala Style Guide</a></li>
                      </ul>
                </li>

                <li class="menu">
                      <a href="#" class="menu">Quickref</a>
                      <ul class="menu-dropdown">
                        <li><a href="/glossary">Glossary</a></li>
                        <li><a href="/cheatsheets">Cheatsheets</a></li>
                      </ul>
                </li>

                <li><a href="/contribute.html">Contribute</a></li>
                <li><a href="/sips">SIPs</a></li>
                <li><a href="http://wiki.scala-lang.org">Wiki</a></li>
          </ul>
          <form method="get" id="searchform" action="/search.html">
            <input type="text" placeholder="Search"  class="field" name="q" id="q"/>
          </form>
           </li>
          </ul>
        </div>
    </div>
</div>

<div class="container">
  <div class="row">

    <div class="span10"><div id="guide-title">macros</div></div>
    <div class="span10"><h1>Def Macros</h1></div>

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    

    
      
    

    <div class="span6">
      
        <a href="/overviews/macros/overview.html"><img src="/resources/images/language/en.png" title="Language: en"/></a>
        
          <a href="/ja/overviews/macros/overview.html"><img src="/resources/images/language/ja.png" title="Language: ja"/></a>
        
      
    </div>

    <div class="span10">
      <span class='label warning' style='float: right;'>EXPERIMENTAL</span>
<p><strong>Eugene Burmako</strong></p>

<h2 id='motivation'>Motivation</h2>

<p>Compile-time metaprogramming has been recognized as a valuable tool for enabling such programming techniques as:</p>

<ul>
<li>Language virtualization (overloading/overriding semantics of the original programming language to enable deep embedding of DSLs),</li>

<li>Program reification (providing programs with means to inspect their own code),</li>

<li>Self-optimization (self-application of domain-specific optimizations based on program reification),</li>

<li>Algorithmic program construction (generation of code that is tedious to write with the abstractions supported by a programming language).</li>
</ul>

<p>In this overview we introduce a macro system for Scala. This facility allows programmers to write macro defs: functions that are transparently loaded by the compiler and executed during compilation. This realizes the notion of compile-time metaprogramming for Scala.</p>

<h2 id='intuition'>Intuition</h2>

<p>Here is a prototypical macro definition:</p>

<pre><code>def m(x: T): R = macro implRef</code></pre>

<p>At first glance macro definitions are equivalent to normal function definitions, except for their body, which starts with the conditional keyword <code>macro</code> and is followed by a possibly qualified identifier that refers to a static macro implementation method.</p>

<p>If, during type-checking, the compiler encounters an application of the macro <code>m(args)</code>, it will expand that application by invoking the corresponding macro implementation method, with the abstract-syntax trees of the argument expressions args as arguments. The result of the macro implementation is another abstract syntax tree, which will be inlined at the call site and will be type-checked in turn.</p>

<p>The following code snippet declares a macro definition assert that references a macro implementation Asserts.assertImpl (definition of assertImpl is provided below):</p>

<pre><code>def assert(cond: Boolean, msg: Any) = macro Asserts.assertImpl</code></pre>

<p>A call <code>assert(x &lt; 10, &quot;limit exceeded&quot;)</code> would then lead at compile time to an invocation</p>

<pre><code>assertImpl(c)(&lt;[ x &lt; 10 ]&gt;, &lt;[ “limit exceeded” ]&gt;)</code></pre>

<p>where <code>c</code> is a context argument that contains information collected by the compiler at the call site, and the other two arguments are abstract syntax trees representing the two expressions <code>x &lt; 10</code> and <code>limit exceeded</code>.</p>

<p>In this document, <code>&lt;[ expr ]&gt;</code> denotes the abstract syntax tree that represents the expression expr. This notation has no counterpart in our proposed extension of the Scala language. In reality, the syntax trees would be constructed from the types in trait <code>scala.reflect.api.Trees</code> and the two expressions above would look like this:</p>

<pre><code>Literal(Constant(&quot;limit exceeded&quot;))

Apply(
  Select(Ident(newTermName(&quot;x&quot;)), newTermName(&quot;$less&quot;),
  List(Literal(Constant(10)))))</code></pre>

<p>Here is a possible implementation of the <code>assert</code> macro:</p>

<pre><code>import scala.reflect.macros.Context
import scala.language.experimental.macros

object Asserts {
  def raise(msg: Any) = throw new AssertionError(msg)
  def assertImpl(c: Context)
    (cond: c.Expr[Boolean], msg: c.Expr[Any]) : c.Expr[Unit] =
   if (assertionsEnabled)
      &lt;[ if (!cond) raise(msg) ]&gt;
      else
      &lt;[ () ]&gt;
}</code></pre>

<p>As the example shows, a macro implementation takes several parameter lists. First comes a single parameter, of type <code>scala.reflect.macros.Context</code>. This is followed by a list of parameters that have the same names as the macro definition parameters. But where the original macro parameter has type <code>T</code>, a macro implementation parameter has type <code>c.Expr[T]</code>. <code>Expr[T]</code> is a type defined in <code>Context</code> that wraps an abstract syntax tree of type <code>T</code>. The result type of the <code>assertImpl</code> macro implementation is again a wrapped tree, of type <code>c.Expr[Unit]</code>.</p>

<p>Also note that macros are considered an experimental and advanced feature, so they need to be enabled explicitly. Do that either with <code>import scala.language.experimental.macros</code> on per-file basis or with <code>-language:experimental.macros</code> (providing a compiler switch) on per-compilation basis.</p>

<h3 id='generic_macros'>Generic macros</h3>

<p>Macro definitions and macro implementations may both be generic. If a macro implementation has type parameters, actual type arguments must be given explicitly in the macro definition’s body. Type parameters in an implementation may come with <code>WeakTypeTag</code> context bounds. In that case the corresponding type tags describing the actual type arguments instantiated at the application site will be passed along when the macro is expanded.</p>

<p>The following code snippet declares a macro definition <code>Queryable.map</code> that references a macro implementation <code>QImpl.map</code>:</p>

<pre><code>class Queryable[T] {
 def map[U](p: T =&gt; U): Queryable[U] = macro QImpl.map[T, U]
}

object QImpl {
 def map[T: c.WeakTypeTag, U: c.WeakTypeTag]
        (c: Context)
        (p: c.Expr[T =&gt; U]): c.Expr[Queryable[U]] = ...
}</code></pre>

<p>Now consider a value <code>q</code> of type <code>Queryable[String]</code> and a macro call</p>

<pre><code>q.map[Int](s =&gt; s.length)</code></pre>

<p>The call is expanded to the following reflective macro invocation</p>

<pre><code>QImpl.map(c)(&lt;[ s =&gt; s.length ]&gt;)
   (implicitly[WeakTypeTag[String]], implicitly[WeakTypeTag[Int]])</code></pre>

<h2 id='a_complete_example'>A complete example</h2>

<p>This section provides an end-to-end implementation of a <code>printf</code> macro, which validates and applies the format string at compile-time. For the sake of simplicity the discussion uses console Scala compiler, but as explained below macros are also supported by Maven and SBT.</p>

<p>Writing a macro starts with a macro definition, which represents the facade of the macro. Macro definition is a normal function with anything one might fancy in its signature. Its body, though, is nothing more that a reference to an implementation. As mentioned above, to define a macro one needs to import <code>scala.language.experimental.macros</code> or to enable a special compiler switch, <code>-language:experimental.macros</code>.</p>

<pre><code>import scala.language.experimental.macros
def printf(format: String, params: Any*): Unit = macro printf_impl</code></pre>

<p>Macro implementation must correspond to macro definitions that use it (typically there&#8217;s only one, but there might also be many). In a nutshell, every parameter of type <code>T</code> in the signature of a macro definition must correspond to a parameter of type <code>c.Expr[T]</code> in the signature of a macro implementation. The full list of rules is quite involved, but it&#8217;s never a problem, because if the compiler is unhappy, it will print the signature it expects in the error message.</p>

<pre><code>import scala.reflect.macros.Context
def printf_impl(c: Context)(format: c.Expr[String], params: c.Expr[Any]*): c.Expr[Unit] = ...</code></pre>

<p>Compiler API is exposed in <code>scala.reflect.macros.Context</code>. Its most important part, reflection API, is accessible via <code>c.universe</code>. It&#8217;s customary to import <code>c.universe._</code>, because it includes a lot of routinely used functions and types</p>

<pre><code>import c.universe._</code></pre>

<p>First of all, the macro needs to parse the provided format string. Macros run during the compile-time, so they operate on trees, not on values. This means that the format parameter of the <code>printf</code> macro will be a compile-time literal, not an object of type <code>java.lang.String</code>. This also means that the code below won&#8217;t work for <code>printf(get_format(), ...)</code>, because in that case <code>format</code> won&#8217;t be a string literal, but rather an AST that represents a function application.</p>

<pre><code>val Literal(Constant(s_format: String)) = format.tree</code></pre>

<p>Typical macros (and this macro is not an exception) need to create ASTs (abstract syntax trees) which represent Scala code. To learn more about generation of Scala code, take a look at <a href='http://docs.scala-lang.org/overviews/reflection/overview.html'>the overview of reflection</a>. Along with creating ASTs the code provided below also manipulates types. Note how we get a hold of Scala types that correspond to <code>Int</code> and <code>String</code>. Reflection overview linked above covers type manipulations in detail. The final step of code generation combines all the generated code into a <code>Block</code>. Note the call to <code>reify</code>, which provides a shortcut for creating ASTs.</p>

<pre><code>val evals = ListBuffer[ValDef]()
def precompute(value: Tree, tpe: Type): Ident = {
  val freshName = newTermName(c.fresh(&quot;eval$&quot;))
  evals += ValDef(Modifiers(), freshName, TypeTree(tpe), value)
  Ident(freshName)
}

val paramsStack = Stack[Tree]((params map (_.tree)): _*)
val refs = s_format.split(&quot;(?&lt;=%[\\w%])|(?=%[\\w%])&quot;) map {
  case &quot;%d&quot; =&gt; precompute(paramsStack.pop, typeOf[Int])
  case &quot;%s&quot; =&gt; precompute(paramsStack.pop, typeOf[String])
  case &quot;%%&quot; =&gt; Literal(Constant(&quot;%&quot;))
  case part =&gt; Literal(Constant(part))
}

val stats = evals ++ refs.map(ref =&gt; reify(print(c.Expr[Any](ref).splice)).tree)
c.Expr[Unit](Block(stats.toList, Literal(Constant(()))))</code></pre>

<p>The snippet below represents a complete definition of the <code>printf</code> macro. To follow the example, create an empty directory and copy the code to a new file named <code>Macros.scala</code>.</p>

<pre><code>import scala.reflect.macros.Context
import scala.collection.mutable.{ListBuffer, Stack}

object Macros {
  def printf(format: String, params: Any*): Unit = macro printf_impl

  def printf_impl(c: Context)(format: c.Expr[String], params: c.Expr[Any]*): c.Expr[Unit] = {
    import c.universe._
    val Literal(Constant(s_format: String)) = format.tree

    val evals = ListBuffer[ValDef]()
    def precompute(value: Tree, tpe: Type): Ident = {
      val freshName = newTermName(c.fresh(&quot;eval$&quot;))
      evals += ValDef(Modifiers(), freshName, TypeTree(tpe), value)
      Ident(freshName)
    }

    val paramsStack = Stack[Tree]((params map (_.tree)): _*)
    val refs = s_format.split(&quot;(?&lt;=%[\\w%])|(?=%[\\w%])&quot;) map {
      case &quot;%d&quot; =&gt; precompute(paramsStack.pop, typeOf[Int])
      case &quot;%s&quot; =&gt; precompute(paramsStack.pop, typeOf[String])
      case &quot;%%&quot; =&gt; Literal(Constant(&quot;%&quot;))
      case part =&gt; Literal(Constant(part))
    }

    val stats = evals ++ refs.map(ref =&gt; reify(print(c.Expr[Any](ref).splice)).tree)
    c.Expr[Unit](Block(stats.toList, Literal(Constant(()))))
  }
}</code></pre>

<p>To use the <code>printf</code> macro, create another file <code>Test.scala</code> in the same directory and put the following code into it. Note that using a macro is as simple as calling a function. It also doesn&#8217;t require importing <code>scala.language.experimental.macros</code>.</p>

<pre><code>object Test extends App {
  import Macros._
  printf(&quot;hello %s!&quot;, &quot;world&quot;)
}</code></pre>

<p>An important aspect of macrology is separate compilation. To perform macro expansion, compiler needs a macro implementation in executable form. Thus macro implementations need to be compiled before the main compilation, otherwise you might see the following error:</p>

<pre><code>~/Projects/Kepler/sandbox$ scalac -language:experimental.macros Macros.scala Test.scala
Test.scala:3: error: macro implementation not found: printf (the most common reason for that is that
you cannot use macro implementations in the same compilation run that defines them)
pointing to the output of the first phase
  printf(&quot;hello %s!&quot;, &quot;world&quot;)
        ^
one error found

~/Projects/Kepler/sandbox$ scalac Macros.scala &amp;&amp; scalac Test.scala &amp;&amp; scala Test
hello world!</code></pre>

<h2 id='tips_and_tricks'>Tips and tricks</h2>

<h3 id='using_macros_with_the_commandline_scala_compiler'>Using macros with the command-line Scala compiler</h3>

<p>This scenario is covered in the previous section. In short, compile macros and their usages using separate invocations of <code>scalac</code>, and everything should work fine. If you use REPL, then it&#8217;s even better, because REPL processes every line in a separate compilation run, so you&#8217;ll be able to define a macro and use it right away.</p>

<h3 id='using_macros_with_maven_or_sbt'>Using macros with Maven or SBT</h3>

<p>The walkthrough in this guide uses the simplest possible command-line compilation, but macros also work with build tools such as Maven and SBT. Check out <a href='https://github.com/scalamacros/sbt-example'>https://github.com/scalamacros/sbt-example</a> or <a href='https://github.com/scalamacros/maven-example'>https://github.com/scalamacros/maven-example</a> for end-to-end examples, but in a nutshell you only need to know two things:</p>

<ul>
<li>Macros needs scala-reflect.jar in library dependencies.</li>

<li>The separate compilation restriction requires macros to be placed in a separate project.</li>
</ul>

<h3 id='using_macros_with_scala_ide_or_intellij_idea'>Using macros with Scala IDE or Intellij IDEA</h3>

<p>Both in Scala IDE and in Intellij IDEA macros are known to work fine, given they are moved to a separate project.</p>

<h3 id='debugging_macros'>Debugging macros</h3>

<p>Debugging macros (i.e. the logic that drives macro expansion) is fairly straightforward. Since macros are expanded within the compiler, all that you need is to run the compiler under a debugger. To do that, you need to: 1) add all (!) the libraries from the lib directory in your Scala home (which include such jar files as <code>scala-library.jar</code>, <code>scala-reflect.jar</code> and <code>scala-compiler.jar</code>) to the classpath of your debug configuration, 2) set <code>scala.tools.nsc.Main</code> as an entry point, 3) set command-line arguments for the compiler as <code>-cp &lt;path to the classes of your macro&gt; Test.scala</code>, where <code>Test.scala</code> stands for a test file containing macro invocations to be expanded. After all that is done, you should be able to put a breakpoint inside your macro implementation and launch the debugger.</p>

<p>What really requires special support in tools is debugging the results of macro expansion (i.e. the code that is generated by a macro). Since this code is never written out manually, you cannot set breakpoints there, and you won&#8217;t be able to step through it. Scala IDE and Intellij IDEA teams will probably add support for this in their debuggers at some point, but for now the only way to debug macro expansions are diagnostic prints: <code>-Ymacro-debug-lite</code> (as described below), which prints out the code emitted by macros, and println to trace the execution of the generated code.</p>

<h3 id='inspecting_generated_code'>Inspecting generated code</h3>

<p>With <code>-Ymacro-debug-lite</code> it is possible to see both pseudo-Scala representation of the code generated by macro expansion and raw AST representation of the expansion. Both have their merits: the former is useful for surface analysis, while the latter is invaluable for fine-grained debugging.</p>

<pre><code>~/Projects/Kepler/sandbox$ scalac -Ymacro-debug-lite Test.scala
typechecking macro expansion Macros.printf(&quot;hello %s!&quot;, &quot;world&quot;) at
source-C:/Projects/Kepler/sandbox\Test.scala,line-3,offset=52
{
  val eval$1: String = &quot;world&quot;;
  scala.this.Predef.print(&quot;hello &quot;);
  scala.this.Predef.print(eval$1);
  scala.this.Predef.print(&quot;!&quot;);
  ()
}
Block(List(
ValDef(Modifiers(), newTermName(&quot;eval$1&quot;), TypeTree().setType(String), Literal(Constant(&quot;world&quot;))),
Apply(
  Select(Select(This(newTypeName(&quot;scala&quot;)), newTermName(&quot;Predef&quot;)), newTermName(&quot;print&quot;)),
  List(Literal(Constant(&quot;hello&quot;)))),
Apply(
  Select(Select(This(newTypeName(&quot;scala&quot;)), newTermName(&quot;Predef&quot;)), newTermName(&quot;print&quot;)),
  List(Ident(newTermName(&quot;eval$1&quot;)))),
Apply(
  Select(Select(This(newTypeName(&quot;scala&quot;)), newTermName(&quot;Predef&quot;)), newTermName(&quot;print&quot;)),
  List(Literal(Constant(&quot;!&quot;))))),
Literal(Constant(())))</code></pre>

<h3 id='macros_throwing_unhandled_exceptions'>Macros throwing unhandled exceptions</h3>

<p>What happens if macro throws an unhandled exception? For example, let&#8217;s crash the <code>printf</code> macro by providing invalid input. As the printout shows, nothing dramatic happens. Compiler guards itself against misbehaving macros, prints relevant part of a stack trace, and reports an error.</p>

<pre><code>~/Projects/Kepler/sandbox$ scala
Welcome to Scala version 2.10.0-20120428-232041-e6d5d22d28 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_25).
Type in expressions to have them evaluated.
Type :help for more information.

scala&gt; import Macros._
import Macros._

scala&gt; printf(&quot;hello %s!&quot;)
&lt;console&gt;:11: error: exception during macro expansion:
java.util.NoSuchElementException: head of empty list
        at scala.collection.immutable.Nil$.head(List.scala:318)
        at scala.collection.immutable.Nil$.head(List.scala:315)
        at scala.collection.mutable.Stack.pop(Stack.scala:140)
        at Macros$$anonfun$1.apply(Macros.scala:49)
        at Macros$$anonfun$1.apply(Macros.scala:47)
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:237)
        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:237)
        at scala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:34)
        at scala.collection.mutable.ArrayOps.foreach(ArrayOps.scala:39)
        at scala.collection.TraversableLike$class.map(TraversableLike.scala:237)
        at scala.collection.mutable.ArrayOps.map(ArrayOps.scala:39)
        at Macros$.printf_impl(Macros.scala:47)

              printf(&quot;hello %s!&quot;)
                    ^</code></pre>

<h3 id='reporting_warnings_and_errors'>Reporting warnings and errors</h3>

<p>The canonical way to interact with the user is through the methods of <code>scala.reflect.macros.FrontEnds</code>. <code>c.error</code> reports a compilation error, <code>c.info</code> issues a warning, <code>c.abort</code> reports an error and terminates execution of a macro.</p>

<pre><code>scala&gt; def impl(c: Context) =
  c.abort(c.enclosingPosition, &quot;macro has reported an error&quot;)
impl: (c: scala.reflect.macros.Context)Nothing

scala&gt; def test = macro impl
defined term macro test: Any

scala&gt; test
&lt;console&gt;:32: error: macro has reported an error
              test
              ^</code></pre>

<p>Note that at the moment reporting facilities don&#8217;t support multiple warnings or errors per position as described in <a href='https://issues.scala-lang.org/browse/SI-6910'>SI-6910</a>. This means that only the first error or warning per position will be reported, and the others will be lost (also errors trump warnings at the same position, even if those are reported earlier).</p>

<h3 id='writing_bigger_macros'>Writing bigger macros</h3>

<p>When the code of a macro implementation grows big enough to warrant modularization beyond the body of the implementation method, it becomes apparent that one needs to carry around the context parameter, because most things of interest are path-dependent on the context.</p>

<p>One of the approaches is to write a class that takes a parameter of type <code>Context</code> and then split the macro implementation into a series of methods of that class. This is natural and simple, except that it&#8217;s hard to get it right. Here&#8217;s a typical compilation error.</p>

<pre><code>scala&gt; class Helper(val c: Context) {
     | def generate: c.Tree = ???
     | }
defined class Helper

scala&gt; def impl(c: Context): c.Expr[Unit] = {
     | val helper = new Helper(c)
     | c.Expr(helper.generate)
     | }
&lt;console&gt;:32: error: type mismatch;
 found   : helper.c.Tree
    (which expands to)  helper.c.universe.Tree
 required: c.Tree
    (which expands to)  c.universe.Tree
       c.Expr(helper.generate)
                     ^</code></pre>

<p>The problem in this snippet is in a path-dependent type mismatch. The Scala compiler does not understand that <code>c</code> in <code>impl</code> is the same object as <code>c</code> in <code>Helper</code>, even though the helper is constructed using the original <code>c</code>.</p>

<p>Luckily just a small nudge is all that is needed for the compiler to figure out what&#8217;s going on. One of the possible ways of doing that is using refinement types (the example below is the simplest application of the idea; for example, one could also write an implicit conversion from <code>Context</code> to <code>Helper</code> to avoid explicit instantiations and simplify the calls).</p>

<pre><code>scala&gt; abstract class Helper {
     | val c: Context
     | def generate: c.Tree = ???
     | }
defined class Helper

scala&gt; def impl(c1: Context): c1.Expr[Unit] = {
     | val helper = new { val c: c1.type = c1 } with Helper
     | c1.Expr(helper.generate)
     | }
impl: (c1: scala.reflect.macros.Context)c1.Expr[Unit]</code></pre>

<p>An alternative approach is to pass the identity of the context in an explicit type parameter. Note how the constructor of <code>Helper</code> uses <code>c.type</code> to express the fact that <code>Helper.c</code> is the same as the original <code>c</code>. Scala&#8217;s type inference can&#8217;t figure this out on its own, so we need to help it.</p>

<pre><code>scala&gt; class Helper[C &lt;: Context](val c: C) {
     | def generate: c.Tree = ???
     | }
defined class Helper

scala&gt; def impl(c: Context): c.Expr[Unit] = {
     | val helper = new Helper[c.type](c)
     | c.Expr(helper.generate)
     | }
impl: (c: scala.reflect.macros.Context)c.Expr[Unit]</code></pre>

<h2 id='more_examples'>More examples</h2>

<p>Scala macros have quite a few early adopters. Thanks to active community involvement, we have been able to rapidly prototype, and now there&#8217;s some code that can be used as a reference. Read more about the state of the art at <a href='http://scalamacros.org/news/2012/11/05/status-update.html'>http://scalamacros.org/news/2012/11/05/status-update.html</a>.</p>

<p>We also recommend a short tutorial on Scala macros written by Adam Warski: <a href='http://www.warski.org/blog/2012/12/starting-with-scala-macros-a-short-tutorial'>http://www.warski.org/blog/2012/12/starting-with-scala-macros-a-short-tutorial</a>. It provides a step-by-step guide through writing a debug printing macro with explanations covering setup of an SBT project, usage of <code>reify</code> and <code>splice</code> and manually assembly of ASTs.</p>
      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  
    var disqus_shortname = 'scalasip'; // required: replace example with your forum shortname
  

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>

    <div class="span6">
      <div id="scroller-anchor">
  <div id="scroller">
    <p class="contents">Contents</p>


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
      
  

  
      
  

  
      
  

  
      
  

  
      
  

  
      
  

  
      
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
      
  

  
      
  

  
      
  

  
      
  

  
      
  

  
      
  

  
      
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  



  <ul>
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/overview.html">Def Macros</a></li>
           
        
          <div id="toc"></div>
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/paradise.html">Macro Paradise</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/typemacros.html">Type Macros</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/quasiquotes.html">Quasiquotes</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/untypedmacros.html">Untyped Macros</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/bundles.html">Macro Bundles</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
        
          <li><a href="/overviews/macros/inference.html">Inference-Driving Macros</a></li>
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
           
        
      
    
  </ul>


  </div>
</div>
    </div>


  </div>
</div>

<div class="footer">
	<div class="container">
		<ul>
			<li><h5>API</h5></li>
			<li><a href="http://www.scala-lang.org/api/current/">Current</a></li>
			<li><a href="http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html">Nightly</a></li>
		</ul>
		<ul>
			<li><h5>Learn</h5></li>
			<li><a href="/overviews">Guides & Overviews</a></li>
			<li><a href="/tutorials">Tutorials</a></li>
			<li><a href="/style">Scala Style Guide</a></li>				
		</ul>
		<ul>
			<li><h5>Quickref</h5></li>
			<li><a href="/glossary">Glossary</a></li>
			<li><a href="/cheatsheets">Cheatsheets</a></li>
		</ul>
		<ul>
			<li><h5>Contribute</h5></li>
			<li><a href="http://github.com/scala/scala.github.com">Source Code</a></li>
			<li><a href="/contribute.html">Contributors Guide</a></li>
			<li><a href="http://getsatisfaction.com/scaladocs">Suggestions</a></li>			
		</ul>
		<ul>
			<li><h5>Other Resources</h5></li>
			<li><a href="http://wiki.scala-lang.org">Wiki</a></li>
			<li><a href="/sips">Scala Improvement Process</a></li>				
		</ul>						
	</div>
	<div class="container copyright">
 		<p>
			Copyright &copy; 2011-2013 EPFL. All rights reserved.
			<a href="https://github.com/scala/scala.github.com/commits/gh-pages.atom"><img align="right" height="20px" width="20px" src="/resources/images/rss.png" alt="RSS feed of updates to the github repo hosting this site"></a>
		</p>		
	</div>
</div>


<script type="text/javascript">
  $('#toc').toc({exclude: 'h1, h5, h6', context: '', autoId: true, numerate: false});
</script>

<script type="text/javascript">
  $(function() {
    moveScroller();
  });
</script>

  </body>
</html>


